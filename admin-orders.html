<!DOCTYPE html>
<html>
<head>
<title>Admin Orders | PlayWithEase</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:Poppins,Arial}
body{background:#f1f5f9;padding:20px}

.order{
  background:#fff;
  padding:14px;
  border-radius:14px;
  margin-bottom:14px;
  box-shadow:0 6px 18px rgba(0,0,0,.08)
}

button{
  margin-right:8px;
  margin-top:6px;
  padding:6px 12px;
  border:none;
  border-radius:8px;
  font-weight:600;
  cursor:pointer;
}

.progress{background:#f59e0b;color:#fff}
.success{background:#16a34a;color:#fff}
.cancel{background:#dc2626;color:#fff}
.delete{background:#475569;color:#fff}
</style>
</head>

<body>

<h2>üõ† Admin ‚Äì Orders</h2>

<div id="adminOrders"></div>

<script>
let orders = JSON.parse(localStorage.getItem("orders") || "[]");
const box = document.getElementById("adminOrders");

function render(){
  box.innerHTML = "";
  if(orders.length === 0){
    box.innerHTML = "<p>No orders found.</p>";
    return;
  }

  orders.forEach((o,i)=>{
  box.innerHTML += `
    <div class="order">
      <p><b>Order ID:</b> ${o.id}</p>
      <p><b>Amount:</b> ‚Çπ${o.total}</p>
      <p><b>Status:</b> ${o.status}</p>

      <button class="progress" onclick="setStatus(${i}, 'in-progress')">
        In Progress
      </button>

      <button class="success" onclick="setStatus(${i}, 'success')">
        Success
      </button>

      <button class="cancel" onclick="setStatus(${i}, 'cancelled')">
        Cancel
      </button>

      <button class="delete" onclick="deleteOrder(${i})">
        Delete
      </button>

      <button onclick="addCredentials(${i})">
        üîê Add Login Details
      </button>
    </div>
  `;
});
}

function setStatus(index, status){
  orders[index].status = status;
  localStorage.setItem("orders", JSON.stringify(orders));
  render();
}

function deleteOrder(index){
  if(!confirm("Delete this order permanently?")) return;
  orders.splice(index,1);
  localStorage.setItem("orders", JSON.stringify(orders));
  render();
}
function addCredentials(index){
  let email = prompt("Enter game account Email / ID:");
  if(!email) return;

  let password = prompt("Enter game account Password:");
  if(!password) return;

  let note = prompt("Extra note (optional):") || "";

  orders[index].credentials = {
    email: email,
    password: password,
    note: note
  };

  orders[index].status = "success"; // delivery done

  localStorage.setItem("orders", JSON.stringify(orders));
  render();
}
</script>

</body>
</html>
