<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Your Cart | PlayWithEase</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Rajdhani:wght@500;600;700&family=Inter:wght@300;400;600;800&family=Orbitron:wght@900&display=swap" rel="stylesheet">
    
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        tech: ['Rajdhani', 'sans-serif'],
                        display: ['Orbitron', 'sans-serif'],
                    },
                    colors: {
                        bg: { main: '#080808', card: '#101010', surface: '#181818' },
                        brand: { 
                            gta: '#ff00aa', 
                            blue: '#2563eb',
                            gold: '#fbbf24',
                            green: '#10b981'
                        }
                    },
                    animation: {
                        'pulse-slow': 'pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                    }
                }
            }
        }
    </script>

    <style>
        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #080808; }
        ::-webkit-scrollbar-thumb { background: #333; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #555; }

        /* Glassmorphism */
        .glass {
            background: rgba(16, 16, 16, 0.7);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            border: 1px solid rgba(255, 255, 255, 0.08);
        }

        .neon-shadow:hover {
            box-shadow: 0 0 20px rgba(37, 99, 235, 0.4);
        }
    </style>
</head>

<body class="bg-bg-main text-white antialiased overflow-x-hidden" x-data="cartLogic()">

    <nav class="fixed top-0 w-full z-50 glass border-b border-white/5 h-20">
        <div class="max-w-[1200px] mx-auto px-6 h-full flex items-center justify-between">
            
            <a href="index.html" class="flex items-center gap-3 cursor-pointer group hover:opacity-80 transition">
                <i data-lucide="arrow-left" class="w-6 h-6 text-gray-400 group-hover:text-white group-hover:-translate-x-1 transition"></i>
                <div class="relative w-10 h-10 flex items-center justify-center bg-white/5 rounded-xl border border-white/10 overflow-hidden">
                    <i data-lucide="gamepad-2" class="relative z-10 w-6 h-6 text-white"></i>
                </div>
                <h1 class="font-display text-xl tracking-wider hidden md:block">PLAYWITH<span class="text-brand-blue">EASE</span></h1>
            </a>

            <div class="flex items-center gap-4 text-sm font-tech tracking-wider">
                <div class="flex items-center gap-2 text-white font-bold">
                    <span class="w-6 h-6 rounded-full bg-brand-blue flex items-center justify-center text-[10px]">1</span>
                    <span>CART</span>
                </div>
                <div class="w-12 h-px bg-white/10"></div>
                <div class="flex items-center gap-2 text-gray-500">
                    <span class="w-6 h-6 rounded-full border border-white/10 flex items-center justify-center text-[10px]">2</span>
                    <span>PAYMENT</span>
                </div>
            </div>

            <button @click="toggleCurrency" 
                    class="flex items-center gap-2 px-3 py-1.5 rounded-lg bg-white/5 hover:bg-white/10 border border-white/5 transition text-xs font-bold font-tech tracking-wider">
                <span x-text="currency === 'USD' ? 'USD ($)' : 'INR (₹)'"></span>
            </button>
        </div>
    </nav>

    <main class="max-w-[1200px] mx-auto px-6 pt-32 pb-20 grid grid-cols-1 lg:grid-cols-3 gap-12">

        <div class="lg:col-span-2 space-y-6">
            <h2 class="text-3xl font-display font-bold flex items-center gap-3">
                MY CART <span class="text-brand-blue" x-text="'(' + cartItems.length + ')'"></span>
            </h2>

            <div x-show="cartItems.length === 0" class="text-center py-20 border border-dashed border-white/10 rounded-2xl bg-white/5">
                <i data-lucide="ghost" class="w-16 h-16 text-gray-600 mx-auto mb-4"></i>
                <h3 class="text-xl font-bold text-gray-400">Your cart is empty</h3>
                <a href="index.html" class="mt-4 inline-block text-brand-blue hover:text-white underline">Browse Store</a>
            </div>

            <template x-for="(item, index) in cartItems" :key="item.id">
                <div class="group relative flex gap-4 md:gap-6 p-4 rounded-xl bg-bg-card border border-white/5 hover:border-brand-blue/30 transition-all duration-300">
                    
                    <div class="w-24 h-32 md:w-32 md:h-44 flex-shrink-0 rounded-lg overflow-hidden relative">
                        <img :src="item.image" class="w-full h-full object-cover group-hover:scale-110 transition duration-700">
                    </div>

                    <div class="flex-1 flex flex-col justify-between py-1">
                        <div>
                            <div class="flex justify-between items-start">
                                <h3 class="font-bold text-lg md:text-xl text-white font-display tracking-wide" x-text="item.title"></h3>
                                <button @click="removeItem(index)" class="text-gray-500 hover:text-red-500 transition"><i data-lucide="trash-2" class="w-5 h-5"></i></button>
                            </div>
                            <div class="flex items-center gap-2 mt-2 text-xs text-gray-400 font-tech uppercase tracking-wider">
                                <span class="bg-white/10 px-2 py-0.5 rounded flex items-center gap-1"><i data-lucide="monitor" class="w-3 h-3"></i> PC</span>
                                <span class="bg-brand-blue/10 text-brand-blue px-2 py-0.5 rounded">Digital Key</span>
                            </div>
                        </div>

                        <div class="flex justify-between items-end">
                            <label class="flex items-center gap-2 cursor-pointer group/gift">
                                <input type="checkbox" class="w-4 h-4 bg-transparent border-gray-600 rounded text-brand-blue focus:ring-0">
                                <span class="text-sm text-gray-400 group-hover/gift:text-white transition">Buy as Gift</span>
                            </label>
                            
                            <div class="text-right">
                                <div x-show="item.oldPrice" class="text-xs text-gray-500 line-through mb-0.5" x-text="formatPrice(item.oldPrice)"></div>
                                <div class="text-2xl font-bold font-tech text-white" x-text="formatPrice(item.price)"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </template>
        </div>

        <div class="lg:col-span-1">
            <div class="glass rounded-2xl p-6 sticky top-28 border border-white/10">
                <h3 class="font-display font-bold text-xl mb-6 border-b border-white/10 pb-4">ORDER SUMMARY</h3>

                <div class="space-y-3 mb-6 text-sm font-tech tracking-wide">
                    <div class="flex justify-between text-gray-400">
                        <span>Official Price</span>
                        <span class="line-through" x-text="formatPrice(totalOldPrice)"></span>
                    </div>
                    <div class="flex justify-between text-white">
                        <span>Store Price</span>
                        <span x-text="formatPrice(totalPrice)"></span>
                    </div>
                    <div class="flex justify-between text-green-500">
                        <span>You Save</span>
                        <span x-text="formatPrice(totalOldPrice - totalPrice)"></span>
                    </div>
                </div>

                <div class="relative mb-6">
                    <input type="text" x-model="promoCode" placeholder="Promo Code" class="w-full bg-black/50 border border-white/10 rounded-lg py-3 px-4 text-sm focus:outline-none focus:border-brand-blue/50 uppercase placeholder-gray-600">
                    <button @click="applyPromo" class="absolute right-2 top-1.5 bottom-1.5 px-3 bg-white/10 hover:bg-brand-blue text-white text-xs font-bold rounded transition">APPLY</button>
                    <p x-show="promoMessage" class="text-xs mt-2" :class="promoSuccess ? 'text-green-500' : 'text-red-500'" x-text="promoMessage"></p>
                </div>

                <div class="flex justify-between items-end border-t border-white/10 pt-4 mb-8">
                    <span class="text-gray-400 font-bold uppercase text-sm">Total</span>
                    <span class="text-3xl font-display font-black text-brand-blue" x-text="formatPrice(finalTotal)"></span>
                </div>

                <a href="checkout.html" class="w-full py-4 bg-brand-blue hover:bg-blue-600 text-white font-bold font-display tracking-widest uppercase rounded-xl transition shadow-[0_0_20px_rgba(37,99,235,0.3)] hover:shadow-[0_0_30px_rgba(37,99,235,0.5)] flex items-center justify-center gap-2 group cursor-pointer text-center">
                    Secure Checkout <i data-lucide="lock" class="w-4 h-4 group-hover:scale-110 transition"></i>
                </a>

                <div class="mt-6 flex justify-center gap-4 opacity-50 grayscale hover:grayscale-0 transition duration-500">
                    <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/e/e1/UPI-Logo-vector.svg/1200px-UPI-Logo-vector.svg.png" class="h-6 object-contain">
                    <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/2/2a/Mastercard-logo.svg/1280px-Mastercard-logo.svg.png" class="h-6 object-contain">
                    <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/5/5e/Visa_Inc._logo.svg/2560px-Visa_Inc._logo.svg.png" class="h-6 object-contain">
                </div>
            </div>
        </div>

    </main>

    <footer class="bg-black border-t border-white/5 py-8 text-center text-gray-600 text-xs">
        <p>&copy; 2026 PlayWithEase. 256-bit SSL Secured Transaction.</p>
    </footer>

    <script>
        document.addEventListener('alpine:init', () => {
            Alpine.data('cartLogic', () => ({
                currency: 'INR', // Default INR
                exchangeRate: 85.0,
                promoCode: '',
                promoMessage: '',
                promoSuccess: false,
                discountMultiplier: 1,

                // Simulated Items (In a real app, this comes from localStorage/Database)
                cartItems: [
                    { 
                        id: 1, 
                        title: 'Grand Theft Auto V: Premium', 
                        price: 14.99, 
                        oldPrice: 29.99, 
                        image: 'https://image.api.playstation.com/vulcan/ap/disc/2110/CUSA00411_00/H541E22.png' 
                    },
                    { 
                        id: 3, 
                        title: 'Cyberpunk 2077: Ultimate', 
                        price: 29.99, 
                        oldPrice: 49.99, 
                        image: 'https://image.api.playstation.com/vulcan/ap/disc/2108/CUSA16596_00/H630B37.png' 
                    }
                ],

                init() {
                    lucide.createIcons();
                },

                toggleCurrency() {
                    this.currency = this.currency === 'USD' ? 'INR' : 'USD';
                },

                get totalPrice() {
                    return this.cartItems.reduce((sum, item) => sum + item.price, 0);
                },

                get totalOldPrice() {
                    return this.cartItems.reduce((sum, item) => sum + (item.oldPrice || item.price), 0);
                },

                get finalTotal() {
                    return this.totalPrice * this.discountMultiplier;
                },

                removeItem(index) {
                    this.cartItems.splice(index, 1);
                },

                applyPromo() {
                    if (this.promoCode.toUpperCase() === 'GTA6') {
                        this.discountMultiplier = 0.8; // 20% off
                        this.promoSuccess = true;
                        this.promoMessage = 'CODE APPLIED! 20% OFF';
                    } else {
                        this.discountMultiplier = 1;
                        this.promoSuccess = false;
                        this.promoMessage = 'INVALID CODE';
                    }
                },

                formatPrice(price) {
                    if (this.currency === 'USD') {
                        return '$' + price.toFixed(2);
                    } else {
                        // Intelligent rounding for INR (e.g., 14.99 -> 1299)
                        const inr = Math.round(price * this.exchangeRate / 10) * 10 - 1; 
                        return '₹' + (inr > 0 ? inr.toLocaleString('en-IN') : 0);
                    }
                }
            }))
        });
    </script>
</body>
</html>
