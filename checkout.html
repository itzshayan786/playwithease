<main class="container">
    <div style="max-width: 600px; margin: 0 auto; background: white; padding: 2rem; border-radius: 12px; box-shadow: var(--shadow);">
        <h2>Complete Your Order</h2>
        <div id="order-summary" style="margin: 2rem 0;"></div>
        
        <div style="text-align: center; background: #f9f9f9; padding: 2rem; border-radius: 8px;">
            <h3>Scan to Pay via UPI</h3>
            <p style="font-size: 0.8rem; margin-bottom: 1rem;">Order ID: <span id="order-id"></span></p>
            <img id="upi-qr" src="" style="width: 200px; margin-bottom: 1rem;">
            <p><strong>shayanff98@okhdfcbank</strong></p>
            <button class="btn" onclick="copyUPI()">Copy UPI ID</button>
        </div>

        <button class="btn btn-primary" style="margin-top: 2rem; background: #25D366;" onclick="sendWhatsApp()">
            Confirm on WhatsApp
        </button>
    </div>
</main>

<script>
    const orderId = "PWE-" + Math.floor(Math.random() * 1000000);
    document.getElementById('order-id').innerText = orderId;

    const total = JSON.parse(localStorage.getItem('pwe_cart')).reduce((s, i) => s + i.price, 0);
    
    // QR Code API (Using Google Charts for stability)
    const upiLink = `upi://pay?pa=shayanff98@okhdfcbank&pn=PlayWithEase&am=${total}&tn=${orderId}&cu=INR`;
    document.getElementById('upi-qr').src = `https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=${encodeURIComponent(upiLink)}`;

    function sendWhatsApp() {
        const cart = JSON.parse(localStorage.getItem('pwe_cart'));
        const items = cart.map(i => i.name).join(", ");
        const msg = `Hello PlayWithEase! I'd like to confirm my order.\n\nOrder ID: ${orderId}\nItems: ${items}\nTotal: â‚¹${total}\n\nI have completed the payment via UPI.`;
        window.open(`https://wa.me/91XXXXXXXXXX?text=${encodeURIComponent(msg)}`);
    }
</script>
