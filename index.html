<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PlayWithEase | PS5 Experience</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Saira:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>

    <style>
        :root {
            --bg: #000000;
            --glass: rgba(255, 255, 255, 0.08);
            --glass-hover: rgba(255, 255, 255, 0.2);
            --sony-blue: #0070d1;
            --accent: #ffffff;
            --text-grey: #b3b3b3;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Saira', sans-serif; }
        body { background-color: var(--bg); color: white; overflow-x: hidden; }
        
        /* --- BACKGROUND AMBIENCE --- */
        .ambient-glow {
            position: fixed; top: -20%; right: -10%; width: 50vw; height: 50vw;
            background: radial-gradient(circle, var(--sony-blue) 0%, transparent 70%);
            opacity: 0.2; z-index: -1; pointer-events: none;
        }

        /* --- HEADER --- */
        header {
            position: fixed; top: 0; width: 100%; z-index: 1000;
            padding: 20px 40px; display: flex; justify-content: space-between; align-items: center;
            background: linear-gradient(to bottom, rgba(0,0,0,0.9), transparent);
        }
        
        .nav-left { display: flex; gap: 30px; font-size: 14px; font-weight: 600; text-transform: uppercase; letter-spacing: 1px; }
        .nav-item { opacity: 0.6; cursor: pointer; transition: 0.3s; position: relative; }
        .nav-item.active, .nav-item:hover { opacity: 1; text-shadow: 0 0 10px white; }
        .nav-item.active::after {
            content: ''; position: absolute; bottom: -5px; left: 0; width: 100%; height: 2px; background: var(--sony-blue);
        }

        .offline-btn {
            background: rgba(255, 50, 50, 0.2); border: 1px solid rgba(255, 50, 50, 0.5);
            padding: 8px 16px; border-radius: 20px; font-size: 11px; font-weight: 700;
            display: flex; align-items: center; gap: 8px; cursor: pointer; transition: 0.3s;
        }
        .offline-btn:hover { background: rgba(255, 50, 50, 0.8); box-shadow: 0 0 20px red; }

        .auth-btn {
            background: white; color: black; padding: 8px 24px; border-radius: 20px;
            font-weight: 700; font-size: 13px; cursor: pointer; border: none;
        }

        /* --- HERO SECTION (DYNAMIC) --- */
        .hero {
            height: 85vh; position: relative; display: flex; align-items: flex-end; padding-bottom: 80px;
            transition: background 0.5s; overflow: hidden;
        }
        
        .hero-bg-img {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            object-fit: cover; z-index: -1; mask-image: linear-gradient(to bottom, black 50%, transparent 100%);
            -webkit-mask-image: linear-gradient(to bottom, black 50%, transparent 100%);
            transition: opacity 0.8s ease;
        }

        .hero-content {
            padding-left: 60px; width: 50%; z-index: 10;
            transform: translateY(20px); opacity: 0; transition: 0.5s ease-out;
        }
        .hero-content.visible { transform: translateY(0); opacity: 1; }

        .game-logo-text {
            font-size: 60px; font-weight: 900; line-height: 1; text-transform: uppercase;
            margin-bottom: 15px; text-shadow: 0 0 30px rgba(0,0,0,0.8);
        }
        
        .meta-tags { display: flex; gap: 15px; font-size: 12px; color: var(--text-grey); margin-bottom: 20px; font-weight: 600; }
        .tag-box { border: 1px solid white; padding: 2px 6px; border-radius: 3px; color: white; }

        .hero-desc { font-size: 16px; color: #e0e0e0; margin-bottom: 30px; max-width: 500px; text-shadow: 1px 1px 2px black; }

        .price-tag { font-size: 24px; font-weight: 300; margin-bottom: 20px; }
        .price-tag span { font-weight: 700; font-size: 32px; }

        .action-row { display: flex; gap: 20px; }
        .btn-primary {
            background: var(--sony-blue); color: white; border: none; padding: 12px 30px;
            border-radius: 30px; font-weight: 700; font-size: 16px; cursor: pointer;
            transition: 0.3s; display: flex; align-items: center; gap: 10px;
        }
        .btn-primary:hover { transform: scale(1.05); box-shadow: 0 0 30px var(--sony-blue); }

        .btn-glass {
            background: rgba(255,255,255,0.2); backdrop-filter: blur(10px); color: white; border: none;
            padding: 12px 20px; border-radius: 30px; font-weight: 600; cursor: pointer; display: flex; align-items: center; gap: 10px;
        }
        .btn-glass:hover { background: white; color: black; }

        /* --- HERO SWITCHER (THE FIX) --- */
        .hero-switch {
            position: absolute; bottom: 40px; right: 60px; display: flex; gap: 20px; z-index: 20;
        }
        .switch-card {
            width: 160px; height: 90px; border-radius: 12px; overflow: hidden; cursor: pointer;
            border: 2px solid transparent; transition: 0.3s; position: relative;
        }
        .switch-card img { width: 100%; height: 100%; object-fit: cover; opacity: 0.6; }
        .switch-card:hover, .switch-card.active { border-color: white; transform: scale(1.1); box-shadow: 0 10px 30px black; }
        .switch-card.active img { opacity: 1; }
        .switch-label {
            position: absolute; bottom: 5px; left: 10px; font-size: 10px; font-weight: 700; text-shadow: 0 0 5px black;
        }

        /* --- HORIZONTAL RAILS (PS STORE STYLE) --- */
        .shelf { padding: 40px 0 40px 60px; }
        .shelf-title { font-size: 22px; margin-bottom: 20px; font-weight: 300; }
        .shelf-title b { font-weight: 700; }

        .rail {
            display: flex; gap: 25px; overflow-x: auto; padding-bottom: 30px; padding-right: 60px;
            scrollbar-width: none; /* Hide scrollbar */
        }
        .rail::-webkit-scrollbar { display: none; }

        .game-card {
            min-width: 200px; width: 200px; cursor: pointer; transition: 0.3s; position: relative;
        }
        .game-card:hover { transform: translateY(-10px) scale(1.02); z-index: 5; }
        
        .card-art {
            width: 100%; aspect-ratio: 2/3; border-radius: 12px; overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.5); position: relative;
        }
        .card-art img { width: 100%; height: 100%; object-fit: cover; }
        
        .game-card:hover .card-art { box-shadow: 0 0 0 3px white; } /* PS Focus State */

        .card-meta { margin-top: 15px; opacity: 0.7; transition: 0.3s; }
        .game-card:hover .card-meta { opacity: 1; }
        .card-title { font-size: 15px; font-weight: 600; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .card-price { font-size: 13px; color: var(--text-grey); margin-top: 4px; }

        /* --- OFFLINE GAME MODAL --- */
        .game-modal {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #111; z-index: 5000;
            display: none; flex-direction: column; justify-content: center; align-items: center;
        }
        canvas { background: #000; border: 2px solid #333; box-shadow: 0 0 50px rgba(0, 112, 209, 0.2); }
        .game-ui { text-align: center; margin-bottom: 20px; }
        .game-ui h2 { font-size: 40px; color: var(--sony-blue); text-transform: uppercase; letter-spacing: 5px; }

        /* --- VIDEO MODAL --- */
        .video-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: black; z-index: 4000;
            display: none; align-items: center; justify-content: center;
        }
        .close-video { position: absolute; top: 30px; right: 30px; font-size: 40px; cursor: pointer; z-index: 4001; }

    </style>
</head>
<body>

    <div class="ambient-glow"></div>

    <header>
        <div class="nav-left">
            <div class="nav-item active">Games</div>
            <div class="nav-item">Hardware</div>
            <div class="nav-item">Services</div>
            <div class="nav-item">News</div>
        </div>

        <div style="display: flex; gap: 20px; align-items: center;">
            <div class="offline-btn" onclick="startOfflineGame()">
                <i class="fas fa-wifi" style="text-decoration: line-through;"></i>
                NO INTERNET? PLAY THIS
            </div>
            <div class="nav-item"><i class="fas fa-search"></i></div>
            <div class="nav-item"><i class="fas fa-shopping-bag"></i></div>
            <button class="auth-btn" id="loginBtn" onclick="handleLogin()">Sign In</button>
        </div>
    </header>

    <section class="hero" id="hero-section">
        <img id="hero-bg" src="https://images.hdqwalls.com/wallpapers/gta-vi-4k-logo-fo.jpg" class="hero-bg-img">
        
        <div class="hero-content visible" id="hero-text">
            <div class="meta-tags">
                <span class="tag-box">PS5</span>
                <span>EXCLUSIVE PREMIERE</span>
            </div>
            <div class="game-logo-text" id="hero-title">Grand Theft Auto VI</div>
            <p class="hero-desc" id="hero-desc">
                Welcome to Leonida. Experience the next evolution of the open world with Jason and Lucia in the most immersive Vice City ever created.
            </p>
            <div class="price-tag">Pre-Order <span>$69.99</span></div>
            <div class="action-row">
                <button class="btn-primary">Pre-Order Now</button>
                <button class="btn-glass" onclick="playTrailer()"><i class="fas fa-play"></i> Watch Trailer</button>
            </div>
        </div>

        <div class="hero-switch">
            <div class="switch-card active" onclick="switchGame('gta')">
                <img src="https://images.hdqwalls.com/wallpapers/gta-vi-4k-logo-fo.jpg" alt="GTA VI">
                <div class="switch-label">GTA VI</div>
            </div>
            <div class="switch-card" onclick="switchGame('forza')">
                <img src="https://images.hdqwalls.com/wallpapers/forza-horizon-5-4k-game-3r.jpg" alt="Forza">
                <div class="switch-label">FORZA 6</div>
            </div>
        </div>
    </section>

    <div class="shelf">
        <div class="shelf-title">Top 10 <b>in Your Region</b></div>
        <div class="rail" id="trending-rail">
            </div>
    </div>

    <div class="shelf">
        <div class="shelf-title">Coming <b>Soon</b></div>
        <div class="rail" id="soon-rail">
            </div>
    </div>

    <div class="game-modal" id="offlineGame">
        <div class="game-ui">
            <h2>Neon Runner</h2>
            <p>Press SPACE or TAP to Jump. Avoid Red Blocks.</p>
            <p id="score">Score: 0</p>
            <button class="btn-glass" onclick="closeGame()" style="margin: 20px auto;">Exit Game</button>
        </div>
        <canvas id="gameCanvas" width="800" height="400"></canvas>
    </div>

    <div class="video-overlay" id="videoOverlay">
        <div class="close-video" onclick="closeTrailer()">&times;</div>
        <iframe id="youtube-embed" width="80%" height="80%" src="" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>
    </div>

    <script>
        // --- 1. HERO LOGIC (The Switcher) ---
        const games = {
            gta: {
                title: "Grand Theft Auto VI",
                desc: "Welcome to Leonida. Experience the next evolution of the open world with Jason and Lucia in the most immersive Vice City ever created.",
                bg: "https://images.hdqwalls.com/wallpapers/gta-vi-4k-logo-fo.jpg",
                trailer: "QdBZY2fkU-0",
                price: "$69.99",
                color: "#ff0055" // Vice City Pink
            },
            forza: {
                title: "Forza Horizon 6",
                desc: "The Horizon Festival moves to Japan. Drift through neon-lit Tokyo streets and race down Mount Fuji in the most visually stunning racer ever made.",
                bg: "https://images.hdqwalls.com/wallpapers/forza-horizon-5-4k-game-3r.jpg",
                trailer: "FYH9n37B7Yw",
                price: "$59.99",
                color: "#00d2d3" // Horizon Blue
            }
        };

        let activeGame = 'gta';

        function switchGame(gameKey) {
            if(activeGame === gameKey) return;
            activeGame = gameKey;
            const data = games[gameKey];

            // Update Active Card UI
            document.querySelectorAll('.switch-card').forEach(el => el.classList.remove('active'));
            event.currentTarget.classList.add('active');

            // Fade Out Content
            const bg = document.getElementById('hero-bg');
            const text = document.getElementById('hero-text');
            
            text.classList.remove('visible');
            bg.style.opacity = 0;

            setTimeout(() => {
                // Update Data
                bg.src = data.bg;
                document.getElementById('hero-title').innerText = data.title;
                document.getElementById('hero-desc').innerText = data.desc;
                
                // Fade In
                bg.style.opacity = 1;
                text.classList.add('visible');
            }, 500);
        }

        function playTrailer() {
            const id = games[activeGame].trailer;
            document.getElementById('videoOverlay').style.display = 'flex';
            document.getElementById('youtube-embed').src = `https://www.youtube.com/embed/${id}?autoplay=1`;
        }

        function closeTrailer() {
            document.getElementById('videoOverlay').style.display = 'none';
            document.getElementById('youtube-embed').src = "";
        }

        // --- 2. GAME RAILS POPULATION ---
        const railData = [
            { t: "Elden Ring", p: "$39.99", i: "https://images.igdb.com/igdb/image/upload/t_cover_big/co848v.jpg" },
            { t: "Black Myth: Wukong", p: "$59.99", i: "https://images.igdb.com/igdb/image/upload/t_cover_big/co8ush.jpg" },
            { t: "Spider-Man 2", p: "$69.99", i: "https://images.igdb.com/igdb/image/upload/t_cover_big/co660r.jpg" },
            { t: "God of War RagnarÃ¶k", p: "$49.99", i: "https://images.igdb.com/igdb/image/upload/t_cover_big/co5s5v.jpg" },
            { t: "Cyberpunk 2077", p: "$29.99", i: "https://images.igdb.com/igdb/image/upload/t_cover_big/co2mjs.jpg" },
            { t: "Resident Evil 4", p: "$39.99", i: "https://images.igdb.com/igdb/image/upload/t_cover_big/co628e.jpg" },
        ];

        const rail = document.getElementById('trending-rail');
        // Duplicate for demo
        [...railData, ...railData].forEach(g => {
            rail.innerHTML += `
                <div class="game-card">
                    <div class="card-art">
                        <img src="${g.i}" loading="lazy">
                    </div>
                    <div class="card-meta">
                        <div class="card-title">${g.t}</div>
                        <div class="card-price">${g.p}</div>
                    </div>
                </div>
            `;
        });
        document.getElementById('soon-rail').innerHTML = rail.innerHTML; // Copy for demo

        // --- 3. OFFLINE MINI-GAME (NEON RUNNER) ---
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        let gameLoop;
        let player = { x: 50, y: 350, w: 30, h: 30, dy: 0, jump: -12, grounded: true };
        let obstacles = [];
        let frame = 0;
        let score = 0;
        let gameActive = false;

        function startOfflineGame() {
            document.getElementById('offlineGame').style.display = 'flex';
            gameActive = true;
            resetGame();
            requestAnimationFrame(updateGame);
            
            // Input
            window.addEventListener('keydown', e => { if(e.code === 'Space') jump(); });
            canvas.addEventListener('click', jump);
        }

        function closeGame() {
            document.getElementById('offlineGame').style.display = 'none';
            gameActive = false;
        }

        function jump() {
            if(player.grounded) {
                player.dy = player.jump;
                player.grounded = false;
            }
        }

        function resetGame() {
            player.y = 350; player.dy = 0;
            obstacles = []; frame = 0; score = 0;
        }

        function updateGame() {
            if(!gameActive) return;
            ctx.clearRect(0,0, canvas.width, canvas.height);

            // Physics
            player.dy += 0.6; // Gravity
            player.y += player.dy;
            if(player.y > 350) { player.y = 350; player.dy = 0; player.grounded = true; }

            // Draw Player
            ctx.fillStyle = '#0070d1'; // PS Blue
            ctx.shadowBlur = 20; ctx.shadowColor = '#0070d1';
            ctx.fillRect(player.x, player.y, player.w, player.h);

            // Obstacles
            if(frame % 100 === 0) {
                obstacles.push({ x: canvas.width, y: 340, w: 20, h: 40 });
            }
            
            obstacles.forEach((obs, index) => {
                obs.x -= 5;
                ctx.fillStyle = '#ff3333';
                ctx.shadowBlur = 10; ctx.shadowColor = 'red';
                ctx.fillRect(obs.x, obs.y, obs.w, obs.h);

                // Collision
                if(player.x < obs.x + obs.w && player.x + player.w > obs.x &&
                   player.y < obs.y + obs.h && player.y + player.h > obs.y) {
                    resetGame(); // Simple restart on die
                }

                // Score
                if(obs.x + obs.w < 0) { obstacles.splice(index, 1); score++; }
            });

            // HUD
            ctx.shadowBlur = 0;
            ctx.fillStyle = 'white';
            ctx.font = "20px Saira";
            ctx.fillText("Score: " + score, 700, 30);
            document.getElementById('score').innerText = "Score: " + score;

            frame++;
            requestAnimationFrame(updateGame);
        }

        // --- 4. FIREBASE AUTH ---
        const firebaseConfig = {
            apiKey: "AIzaSyAxuYwom2tuGTz3Nsi-6ndYSwK7BkEJIVs",
            authDomain: "playwithease.firebaseapp.com",
            projectId: "playwithease",
            storageBucket: "playwithease.firebasestorage.app",
            messagingSenderId: "189729941006",
            appId: "1:189729941006:web:362653774b92416c357e5f",
            measurementId: "G-1C3B31KQ7C"
        };
        
        try {
            firebase.initializeApp(firebaseConfig);
            const auth = firebase.auth();
            const provider = new firebase.auth.GoogleAuthProvider();

            window.handleLogin = () => {
                auth.signInWithPopup(provider).then(res => {
                    console.log("Logged in");
                }).catch(e => alert(e.message));
            };

            auth.onAuthStateChanged(user => {
                const btn = document.getElementById('loginBtn');
                if(user) {
                    btn.innerHTML = `<i class="fas fa-user-circle"></i> ${user.email.split('@')[0]}`;
                    btn.onclick = () => auth.signOut();
                } else {
                    btn.innerText = "Sign In";
                    btn.onclick = handleLogin;
                }
            });

        } catch(e) { console.log("Firebase config error"); }

    </script>
</body>
</html>
