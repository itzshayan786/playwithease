<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>PlayWithEase Admin</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;800&display=swap" rel="stylesheet">

<style>
body{font-family:Poppins;background:#111;color:#fff;padding:30px}
.order{background:#1e293b;padding:20px;margin-bottom:20px;border-radius:12px}
select{margin-top:10px;padding:5px}
button{margin-top:8px;padding:6px 12px;border:none;border-radius:8px;cursor:pointer}
</style>
</head>
<body>

<h2>Admin Dashboard</h2>
<div id="orders"></div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
import { getFirestore, collection, getDocs, updateDoc, doc } 
from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";

const firebaseConfig={
apiKey:"AIzaSyAxuYwom2tuGTz3Nsi-6ndYSwK7BkEJIVs",
authDomain:"playwithease.firebaseapp.com",
projectId:"playwithease"
};

const app=initializeApp(firebaseConfig);
const db=getFirestore(app);

const container=document.getElementById("orders");

async function loadOrders(){
const snapshot=await getDocs(collection(db,"orders"));

snapshot.forEach(docSnap=>{
let order=docSnap.data();

container.innerHTML+=`
<div class="order">
<div><b>ID:</b> ${docSnap.id}</div>
<div><b>User:</b> ${order.userEmail}</div>
<div><b>Total:</b> â‚¹${order.total}</div>

<select onchange="updateStatus('${docSnap.id}',this.value)">
<option ${order.status==="in-progress"?"selected":""}>in-progress</option>
<option ${order.status==="success"?"selected":""}>success</option>
<option ${order.status==="cancelled"?"selected":""}>cancelled</option>
<option ${order.status==="refunded"?"selected":""}>refunded</option>
</select>
</div>
`;
});
}

window.updateStatus=async function(id,status){
await updateDoc(doc(db,"orders",id),{status:status});
alert("Status Updated");
};

loadOrders();
</script>

</body>
</html>
