<!DOCTYPE html>
<html>
<head>
<title>Order History</title>
</head>
<body>

<h2>Your Orders</h2>
<div id="orders"></div>

<script type="module">

import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
import { 
getFirestore, 
collection, 
query, 
where, 
onSnapshot 
} from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";
import { getAuth, onAuthStateChanged } 
from "https://www.gstatic.com/firebasejs/10.12.0/firebase-auth.js";

const firebaseConfig = {
apiKey:"AIzaSyAxuYwom2tuGTz3Nsi-6ndYSwK7BkEJIVs",
authDomain:"playwithease.firebaseapp.com",
projectId:"playwithease"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);
const auth = getAuth(app);

const container = document.getElementById("orders");

onAuthStateChanged(auth, (user)=>{

if(!user){
container.innerHTML="Please login";
return;
}

const q = query(
collection(db,"orders"),
where("userEmail","==",user.email)
);

onSnapshot(q,(snapshot)=>{

container.innerHTML="";

snapshot.forEach(docSnap=>{
let order = docSnap.data();

container.innerHTML += `
<div style="border:1px solid #ccc;padding:10px;margin:10px;">
Order ID: ${docSnap.id}<br>
Total: â‚¹${order.total}<br>
Status: ${order.status}
</div>
`;

});

});

});

</script>

</body>
</html>
